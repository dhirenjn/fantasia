# Fantasia
This project uses ESP32 with TouchPad sensors to play musical notes (Sa, Re, Ga, Ma, Pa) and control LED flickering. Each touchpin triggers an LED's flicker pattern and a corresponding note. Ideal for exploring touch sensing and sound-reactive lighting.


Features
5 touch sensors: Each sensor corresponds to a musical note (Sa, Re, Ga, Ma, Pa).

5 LEDs: Each LED flickers when the corresponding touchpad is activated.

Speaker: The speaker plays the note corresponding to the touched pad.

PWM Control: LED brightness is controlled using Pulse Width Modulation (PWM) for a flickering effect.

Audio Amplifier (PAM8403): The project uses the PAM8403 audio amplifier to drive the speaker. The ESP32 output is insufficient to drive a speaker directly, so the PAM8403 amplifies the sound output from the ESP32 to drive the speaker.

Components
ESP32 (or any compatible microcontroller with GPIO support)

5 Touch Pads (GPIO pins: 4, 12, 15, 13, 14)

5 LEDs (GPIO pins: 32, 5, 18, 19, 23)

Speaker (connected to GPIO pin 25 via PAM8403)

PAM8403 Audio Amplifier (for driving the speaker)

Resistors (for current limiting with LEDs)

Pin Connections

Component	GPIO Pin
LED1	32
LED2	5
LED3	18
LED4	19
LED5	23
TouchPad1	4
TouchPad2	12
TouchPad3	15
TouchPad4	13
TouchPad5	14
Speaker (via PAM8403)	Pin 25
How It Works
Touch Sensor Activation: When a touchpad is pressed, a corresponding musical note is triggered and played through the speaker.

LED Flickering: When a touchpad is pressed, the corresponding LED flickers in a predefined pattern. If the touchpad is not pressed, the LED remains off.

Speaker Control: The speaker is connected to GPIO pin 25 through the PAM8403 audio amplifier. The frequency of the speaker is set to the note corresponding to the touchpad that is being pressed. The freqs array defines the frequencies for the musical notes (Sa, Re, Ga, Ma, Pa).

Audio Amplifier (PAM8403): The PAM8403 is a low-power audio amplifier that is used to amplify the audio signal generated by the ESP32. This is important since the ESP32 GPIO pins cannot drive a speaker directly at sufficient power. The amplifier ensures the speaker produces audible sound at a suitable volume.

Code Breakdown
PWM Control for LEDs: The LEDs are controlled using PWM on the pins connected to them. PWM allows precise control over the LED brightness.

Touchpad Configuration: Each touchpad is configured with a threshold value (300 in this case) to detect touch.

Speaker and PAM8403: The speaker is connected to GPIO pin 25, and its frequency is adjusted based on the note associated with the touched pad. The PAM8403 amplifies the output from the ESP32.

Flickering Effect: Each LED follows a duty cycle sequence for a flickering effect. The sequence is iterated for each touched touchpad.

Requirements
MicroPython: This code is written for MicroPython. Make sure your board is running MicroPython firmware.

Hardware:

ESP32 board (or compatible microcontroller).

5 touch sensors.

5 LEDs with appropriate resistors.

Speaker connected to PWM pin (via PAM8403 audio amplifier).

PAM8403 audio amplifier.

Power supply for the ESP32 and peripherals.

Setup Instructions
Connect the components as per the pin connections table above.

Connect the speaker to Pin 25 on the ESP32, and ensure the output is passed through the PAM8403 audio amplifier.

The PAM8403 amplifier has VCC, GND, IN (audio signal), and OUT (amplified audio signal) pins. Make sure to connect the IN pin to the ESP32â€™s PWM output (GPIO Pin 25), and connect the OUT pin to the speaker.

Upload the script to your ESP32 or compatible board.

Power on the system and test the touchpads by touching each one. The corresponding LED should flicker, and the speaker should play the appropriate note.

Precautions
Ensure you use current-limiting resistors for the LEDs to avoid damaging them.

Properly connect the PAM8403 amplifier to avoid damaging the ESP32 and the speaker. Ensure correct power and ground connections.

Ensure the speaker is rated appropriately for the output from the PAM8403 amplifier.

Avoid touching the pins directly to prevent static discharge that might damage the components.

License
This project is open-source.
